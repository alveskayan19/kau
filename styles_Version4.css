/* Comentário: este arquivo contém os estilos para a interface da cartinha,
   incluindo envelope, carta, botões e efeitos visuais. Comentários
   explicam as seções e tokens de design (cores, responsividade).
*/
:root{
  /* Cores e tokens utilizados no projeto */
  --bg1:#FFDEE9;
  --bg2:#B5FFFC;
  --accent:#e73737;
  --text:#2b2b2b;
  --card:#fff;
  --glass: rgba(255,255,255,0.45);
}

/* Reset básico e fonte */
*{box-sizing:border-box}
html,body{height:100%;margin:0;font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial}
body{
  /* Fundo com degradê */
  background: linear-gradient(135deg,var(--bg1),var(--bg2));
  display:flex;
  align-items:center;
  justify-content:center;
  padding:32px;
  color:var(--text);
}

/* Container que limita largura */
.wrap{width:100%;max-width:820px}

/* Título principal */
.title{text-align:center;margin:0 0 18px;font-weight:600;color:var(--accent)}

/* Card que agrupa envelope + carta */
.card{
  background:linear-gradient(180deg, rgba(255, 255, 255, 0.85), rgba(252, 252, 252, 0.75));
  border-radius:16px;
  padding:32px;
  box-shadow:0 8px 30px rgba(0,0,0,0.12);
  display:flex;
  gap:20px;
  flex-direction:column;
  align-items:center;
}

/* --- Envelope --- */
/* Área do envelope com perspectiva para animação 3D da aba (flap) */
.envelope{
  width:240px;
  height:160px;
  position:relative;
  cursor:pointer;
  perspective:800px;
  -webkit-tap-highlight-color: transparent;
}
.envelope .body{
  /* corpo do envelope (apenas visual) */
  width:100%;
  height:100%;
  background:linear-gradient(180deg,#fff,#fff0);
  border-radius:8px;
  border:2px solid rgba(255,107,107,0.15);
  position:absolute;
  top:0;left:0;
  box-shadow: 0 6px 18px rgba(0,0,0,0.08);
  display:flex;
  align-items:center;
  justify-content:center;
}
/* Aba do envelope desenhada com bordas triangulares */
.envelope .flap{
  position:absolute;
  top:-10px;
  left:0;
  right:0;
  height:0;
  width:100%;
  transform-origin:center top;
  border-left:120px solid transparent;
  border-right:120px solid transparent;
  border-bottom:70px solid #ffefef; /* cor da aba */
  border-radius:6px;
  transition:transform .6s cubic-bezier(.2,.9,.2,1), box-shadow .3s;
  box-shadow:0 6px 14px rgba(0,0,0,0.06);
}

/* Estado "open": girar a aba para revelar a carta */
.envelope.open .flap{
  transform: rotateX(180deg) translateY(-30px);
  transition:transform .7s cubic-bezier(.2,.9,.2,1);
}
/* Sombra ao pressionar */
.envelope:active .flap{ box-shadow:0 10px 22px rgba(0,0,0,0.12) }

/* Estado "closing": usado para transição suave ao fechar */
.envelope.closing .flap{
  transform: rotateX(0deg) translateY(0);
  transition:transform .6s cubic-bezier(.25,.8,.25,1);
}

/* --- Botões --- */
.btn{
  background:var(--accent);
  border:0;
  color:white;
  padding:10px 16px;
  border-radius:10px;
  cursor:pointer;
  font-weight:600;
  box-shadow:0 6px 18px rgba(255,107,107,0.12);
}

/* --- Carta --- */
.letter{
  width:100%;
  max-width:640px;
  background:linear-gradient(180deg,#fff,#fffefc);
  padding:22px;
  border-radius:12px;
  border:1px solid rgba(0,0,0,0.04);
  box-shadow:0 10px 40px rgba(0,0,0,0.06);
  transform-origin: top center;
  animation:reveal .7s ease forwards; /* anima quando aparece */
}
.hidden{display:none}

.letter-content{
  white-space:pre-wrap; /* mantem quebras de linha do texto */
  font-size:1.05rem;
  line-height:1.5;
  color:var(--text);
  min-height:120px;
  margin-bottom:12px;
  font-family: "Georgia", serif; /* fonte mais "caligráfica" para carta */
}

/* Classe aplicada para efeito de dobra ao fechar a carta */
.letter.closing{
  animation:foldBack .5s cubic-bezier(.25,.8,.25,1) forwards;
}
@keyframes foldBack {
  0% { transform: translateY(0) scale(1); opacity:1; }
  100% { transform: translateY(-26px) scale(.96); opacity:0; }
}

/* Assinatura à direita */
.signature{font-weight:700;text-align:right;color:var(--accent)}

/* Corações (elementos DOM) - agora posicionados dentro de #heartLayer
   Comentário: usar `position:absolute` porque os corações serão filhos
   do container fixo `#heartLayer`. Diminuí o tamanho base para caber no
   envelope e preservei efeitos visuais. */
.heart{
  position:absolute;
  width:14px;height:14px;
  pointer-events:none;
  transform-origin:center;
  will-change:transform,opacity;
  z-index:20;
  filter:drop-shadow(0 4px 10px rgba(0,0,0,0.08));
}

/* Canvas de efeitos (corações caindo) */
.fx-canvas{
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:10;
}

/* Keyframes para corações CAINDO verticalmente.
   Usa a variável CSS `--fall-distance` definida dinamicamente no elemento
   para controlar até onde o coração deve descer. */
@keyframes fallDown {
  0%{transform:translateY(0) scale(1); opacity:1}
  100%{transform:translateY(var(--fall-distance, 420px)) scale(.9); opacity:0}
}
@keyframes reveal { from { transform: translateY(18px) scale(.98); opacity:0 } to { transform:none; opacity:1 } }

/* Responsividade básica */
@media (max-width:560px){
  .envelope{width:200px;height:140px}
  .letter{padding:16px}
}